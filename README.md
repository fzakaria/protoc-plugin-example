# protoc-plugin-example

Generating protobuf code for Java normally involves the following command:

```bash
protoc --java_out=./generated example.proto
```

If you want to run a plugin you provide `--plugin` and the name format must be `protoc-gen-<name>`, and then you can use `--<name>_out` to specify the output directory.
Since we are using insertion points, the out folder must be the same one as the one used for `--java_out`.

```bash
> protoc --java_out=./generated example.proto \
         --plugin=protoc-gen-example=$(realpath ./bazel-bin/src/PluginExample) 
         --example_out=./generated
```

If you check the generated code inside `./generated`, you will see that the plugin has added a new method
to the generated class.

```bash
> rg plugin generated -A 5
generated/com/example/protobuf/tutorial/Person.java
1132:  // Generated by the plugin
1133-  public String hello() {
1134-      return "Hello from " + this.getClass().getSimpleName();
1135-  }
1136-
1137-  // @@protoc_insertion_point(class_scope:Person)

generated/com/example/protobuf/tutorial/Address.java
862:  // Generated by the plugin
863-  public String hello() {
864-      return "Hello from " + this.getClass().getSimpleName();
865-  }
```